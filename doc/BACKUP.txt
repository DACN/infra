======
Backup
======

This document describes how we do backup of our machines and services.

Summary: we are storing to S3 (via EBS from Amazon EC2 hosts).

  * We take rsync snapshots of the machine to, say, /mnt/backup /backup using
    browser:cron/backup
  * On non-EC2 servers these results are rsynced over to an EC2 instance
  * On EC2 instances /backup is an EBS volume
  * These EBS volumes are regularly snapshotted to S3 (TODO)


Details
=======

Configuration is done via /etc/backup::

  /etc/backup/backuprc -- set three basic params
  /etc/backup/backup_exclude
  /etc/backup/backup_include
  /etc/backup/backup.d/ --classic *.d/ file for extra backup scripts to be
    run *prior* to backup of files to new backup location

Actual backup script is:

  /etc/cron.daily/backuprotatingsnapshot -- found at cron in this repo
   

Possibilities for the future
============================

  * Bacula: very mature
  * Duplicity: python and simple

Dicusssion:

  * http://stackoverflow.com/questions/15208/whats-the-best-linux-backup-solution

