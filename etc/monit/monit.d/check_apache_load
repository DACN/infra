# added by rgrp
# Monitoring the apache2 web services.
# It will check process apache2 with given pid file.
# If process name or pidfile path is wrong then monit will 
# give the error of failed.
check process apache2 with pidfile /var/run/apache2.pid

  start program = "/etc/init.d/apache2 start"
  stop program  = "/etc/init.d/apache2 stop"
  # if cpu is greater than 60% for 2 cycles then alert
  # if cpu > 80% for 5 cycles then restart
  # if children > 250 then restart
  if loadavg(5min) > 4 for 3 cycles then restart
  if cpu > 95% for 4 cycles then restart
  # if 3 restarts within 5 cycles then timeout
  group server

