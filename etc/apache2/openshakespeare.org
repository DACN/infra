<VirtualHost *:80>
    ServerName openshakespeare.org
    ServerAlias www.openshakespeare.org demo.openshakespeare.org eu0.openshakespeare.org us0.openshakespeare.org

    Alias /pdf /home/okfn/var/srvc/openshakespeare.org/cache/moby/pdf
    WSGIScriptAlias / /home/okfn/var/srvc/openshakespeare.org/bin/openshakespeare.org.wsgi
    WSGIDaemonProcess openshakespeare.org display-name=SHAKESPEARE processes=3 threads=1 maximum-requests=50
    WSGIProcessGroup openshakespeare.org
    # pass authorization info on (needed for e.g. rest apis)
    WSGIPassAuthorization On

    RewriteEngine on
    RewriteCond %{HTTP_HOST} ^www\.openshakespeare\.org$ [NC]
    RewriteRule ^(.*)$ http://openshakespeare.org$1 [R=301,L]

    # See http://trac.okfn.org/ticket/1100
    RewriteRule ^/code$   https://github.com/okfn/shakespeare
    RewriteRule ^/faq$    http://openshakespeare.org/about

    <Location /admin>
        AuthType Basic
        AuthName "Administration"
        AuthUserFile /home/okfn/svn-okfn/trunk/etc/apache2/okfn_auth_passwords
        AuthGroupFile /home/okfn/svn-okfn/trunk/etc/apache2/okfn_auth_groups

        Require group shakespeare
    </Location>

    ErrorLog /var/log/apache2/openshakespeare.org.error.log
    CustomLog /var/log/apache2/openshakespeare.org.access.log combined
</VirtualHost>

