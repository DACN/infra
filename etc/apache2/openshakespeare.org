<VirtualHost *:80>
    ServerName openshakespeare.org
    ServerAlias www.openshakespeare.org demo.openshakespeare.org eu0.openshakespeare.org us0.openshakespeare.org

    # is not optimal but Redirect do not work with proxy it seems...
    # use blogred so rewrite on blog host works correctly
    ProxyPass /texts/eb11 http://blogred.openshakespeare.org/texts/eb11
    ProxyPass /category http://blogred.openshakespeare.org/category
    # article links ...
    ProxyPass /2008 http://blogred.openshakespeare.org/2008
    ProxyPass /2007 http://blogred.openshakespeare.org/2007
    ProxyPass /2006 http://blogred.openshakespeare.org/2006

    <Proxy *>
        Allow from .openshakespeare.org
    </Proxy>
    ProxyPass / http://localhost:5080/
    ProxyPassReverse / http://localhost:5080/
    ErrorLog /var/log/apache2/openshakespeare.org.error.log
    CustomLog /var/log/apache2/openshakespeare.org.access.log combined
</VirtualHost>

<VirtualHost *:80>
    ServerName openmilton.org
    ServerAlias www.openmilton.org eu0.openmilton.org us0.openmilton.org

    <Proxy *>
        Allow from .openmilton.org
    </Proxy>
    ProxyPass / http://localhost:5081/
    ProxyPassReverse / http://localhost:5081/
    ErrorLog /var/log/apache2/openmilton.org.error.log
    CustomLog /var/log/apache2/openmilton.org.access.log combined
</VirtualHost>

<VirtualHost *:80>
    ServerName blog.openshakespeare.org
    ServerAlias blogred.openshakespeare.org eu0.blog.openshakespeare.org openshakespeare.org www.openshakespeare.org

    DocumentRoot /home/kforge/openshakespeare.org
    DirectoryIndex index.html index.php
    Options -Indexes

    # To deal with proxying from main site
    RewriteCond %{HTTP_HOST}   !^blog\.openshakespeare\.org [NC]
    RewriteCond %{HTTP_HOST}   !^$
    RewriteRule ^/(.*)         http://blog.openshakespeare.org/$1 [L,R]

    ErrorLog /var/log/apache2/blog.openshakespeare.org.error.log
    CustomLog /var/log/apache2/blog.openshakespeare.org.log combined
</VirtualHost>
 
